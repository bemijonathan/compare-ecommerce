{"version":3,"file":"static/webpack/static/development/pages/search.js.617c9ac912fc13393c94.hot-update.js","sources":["webpack:///./components/frame.jsx"],"sourcesContent":["import React, { Component } from 'react'\nimport { withRouter } from 'next/router'\n\nclass FrameComponent extends Component {\n  componentDidMount() {\n    console.log(this._link)\n    this.setState({ counter:  0 })\n    this.getData()\n\n    this.props.router.events.on('routeChangeComplete', (url) => {\n    // this.getData()\n     console.log(url)\n     this.setState({\n      loading:true\n     })\n     this.paginate(url)\n    });\n  }\n  \n  _link = `https://konga-jumia.herokuapp.com/${this.props.type}${this.props.router.asPath.replace('/search', '')}`\n\n  getData = async () => {\n    const res = await fetch(this._link);\n    console.log(this._link)\n    const data = await res.json();\n\n    console.log(data);\n\n    this.setState({\n      products:data.items,\n      totalPage:data.page,\n      loading:false\n    })\n  }\n\n  paginate = async(url) => {\n    let newlink = url.replace('/search','');\n    let link = `https://konga-jumia.herokuapp.com/${this.props.type}${newlink}`\n    this.setState({\n      products:[],\n      loading:true\n    })\n    const res = await fetch(link);\n    console.log(link)\n    const data = await res.json();\n\n    console.log(data)\n\n    this.setState({\n      products:data.items,\n      totalPage:data.page,\n      loading:false\n    })\n  }\n\n  state={\n    counter:0,\n    products:[],\n    totalPage:'',\n    loading:true\n  }\n\n  render() {\n    const PrevPage = (e) => {\n      // this.setState({ counter:  +this.props.router.query.page + 1 })\n      if(this.state.counter > 0){\n        this.setState({counter:this.state.counter - 1})\n      }else{\n        this.setState({counter:0})\n      }\n      page()\n    }\n\n    const page = async() => {\n\n      let {term , page} = this.props.router.query\n      \n      let link = `https://konga-jumia.herokuapp.com/${this.props.type}?term=${term}&page=${this.state.counter}`\n      this.setState({\n        products:[],\n        loading:true\n      })\n\n      const res = await fetch(link);\n      console.log(link)\n      const data = await res.json();\n\n      console.log(data);\n\n      this.setState({\n        products:data.items,\n        totalPage:data.page,\n        loading:false\n      })\n\n    }\n\n    const Nextpage = (e) => {\n      this.setState({counter:this.state.counter + 1})\n      page()\n    }\n\n    const listItems = this.state.products.filter((product) => product.image !== null).map((product, i) =>\n      <div className=\"lg:w-1/2 bg-green-600 lg:p-1 p-3 text-white w-full\" key={i}>\n        <div className=\"bg-white text-black rounded-lg flex items-center\" style={{height:'300px'}}>\n          <div className=\"w-full\">\n            <p className=\"m-3\">{product.name.slice(0,50)+ '...'}</p>\n            <img src={product.image} className=\"m-auto rounded-lg object-contain\" style={{height:'170px'}}/>\n            <div className=\"flex justify-between lg:m-3 m-1\">\n              <p>{product.price}</p>\n              <a href={product.link} target=\"_blank\" > View </a>\n            </div>\n          </div>\n        </div>\n        \n      </div>\n    );\n    return (\n      <>\n        {this.state.loading ? <div className=\"flex justify-center item-center mt-20\">\n          <div id=\"button\"></div >\n        </div>: ''}\n        <section className=\"flex flex-wrap max-h-screen overflow-y-auto bg-white m-3\">\n          {listItems}\n        </section>\n        <section className=\"pagination class flex flex-wrap justify-center items-center pb-5\">\n          <button className=\"p-2 bg-green-500 text-white rounded-lg mr-3\" onClick={Nextpage}>\n            {'Next >'}\n          </button>\n\n          {this.state.counter} of {this.state.totalPage } \n\n          <button className=\"p-2 bg-white text-green-800 rounded-lg mx-3\" onClick={PrevPage}>\n            {'< Prev'}\n          </button>\n        </section>\n\n        <style jsx>{`\n            #button {\n              height: 40px;\n              width: 40px;\n              background: transparent;\n              border-radius: 50%;\n              border: 1px solid white;\n              border-top: 2px solid green;\n              animation: spinner1 600ms linear infinite;\n            }\n            @keyframes spinner1 {\n              to {\n                transform: rotate(360deg);\n              }\n            }\n          `}\n        </style>\n      </>\n\n      \n    )\n  }\n}\n\nexport default withRouter(FrameComponent)"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;AAgBA;AACA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AADA;AACA;AACA;AAFA;AAAA;AACA;AADA;AAGA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AARA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAaA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AAFA;AACA;AAJA;AAAA;AACA;AADA;AAOA;AACA;AARA;AAAA;AACA;AADA;AASA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAdA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAmBA;AACA;AACA;AACA;AACA;AAJA;AACA;;;;;;AApDA;AAAA;AACA;AAAA;AACA;AAAA;AAAA;AACA;AAEA;AACA;AACA;AACA;AAAA;AACA;AADA;AACA;AAEA;AACA;AACA;;;AA6CA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AAAA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AADA;AAAA;AAAA;AAAA;AAAA;AAIA;AACA;AAAA;AACA;AACA;AAFA;AACA;AANA;AAAA;AACA;AADA;AAUA;AACA;AAXA;AAAA;AACA;AADA;AAYA;AAEA;AACA;AACA;AACA;AACA;AACA;AAHA;AACA;AAjBA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAuBA;AACA;AAAA;AAAA;AACA;AAAA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AARA;AAeA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAEA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAGA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAMA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAdA;AAAA;AAAA;AAwCA;;;;AA3JA;AACA;AA6JA;;;;A","sourceRoot":""}