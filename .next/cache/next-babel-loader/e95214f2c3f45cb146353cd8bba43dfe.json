{"ast":null,"code":"import _regeneratorRuntime from \"@babel/runtime-corejs2/regenerator\";\nimport _classCallCheck from \"@babel/runtime-corejs2/helpers/esm/classCallCheck\";\nimport _createClass from \"@babel/runtime-corejs2/helpers/esm/createClass\";\nimport _possibleConstructorReturn from \"@babel/runtime-corejs2/helpers/esm/possibleConstructorReturn\";\nimport _getPrototypeOf from \"@babel/runtime-corejs2/helpers/esm/getPrototypeOf\";\nimport _assertThisInitialized from \"@babel/runtime-corejs2/helpers/esm/assertThisInitialized\";\nimport _inherits from \"@babel/runtime-corejs2/helpers/esm/inherits\";\nimport _defineProperty from \"@babel/runtime-corejs2/helpers/esm/defineProperty\";\nimport _JSXStyle from \"styled-jsx/style\";\nvar __jsx = React.createElement;\nimport React, { Component } from 'react';\nimport { withRouter } from 'next/router';\n\nvar FrameComponent =\n/*#__PURE__*/\nfunction (_Component) {\n  _inherits(FrameComponent, _Component);\n\n  function FrameComponent() {\n    var _getPrototypeOf2;\n\n    var _this;\n\n    _classCallCheck(this, FrameComponent);\n\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n\n    _this = _possibleConstructorReturn(this, (_getPrototypeOf2 = _getPrototypeOf(FrameComponent)).call.apply(_getPrototypeOf2, [this].concat(args)));\n\n    _defineProperty(_assertThisInitialized(_this), \"_link\", \"https://konga-jumia.herokuapp.com/\".concat(_this.props.type).concat(_this.props.router.asPath.replace('/search', '')));\n\n    _defineProperty(_assertThisInitialized(_this), \"getData\", function _callee() {\n      var res, data;\n      return _regeneratorRuntime.async(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.next = 2;\n              return _regeneratorRuntime.awrap(fetch(_this._link));\n\n            case 2:\n              res = _context.sent;\n              console.log(_this._link);\n              _context.next = 6;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 6:\n              data = _context.sent;\n              console.log(data);\n\n              _this.setState({\n                products: data.items,\n                totalPage: data.page,\n                loading: false\n              });\n\n            case 9:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"paginate\", function _callee2(url) {\n      var newlink, link, res, data;\n      return _regeneratorRuntime.async(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              newlink = url.replace('/search', '');\n              link = \"https://konga-jumia.herokuapp.com/\".concat(_this.props.type).concat(newlink);\n\n              _this.setState({\n                products: [],\n                loading: true\n              });\n\n              _context2.next = 5;\n              return _regeneratorRuntime.awrap(fetch(link));\n\n            case 5:\n              res = _context2.sent;\n              console.log(link);\n              _context2.next = 9;\n              return _regeneratorRuntime.awrap(res.json());\n\n            case 9:\n              data = _context2.sent;\n              console.log(data);\n\n              _this.setState({\n                products: data.items,\n                totalPage: data.page,\n                loading: false\n              });\n\n            case 12:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      });\n    });\n\n    _defineProperty(_assertThisInitialized(_this), \"state\", {\n      counter: 0,\n      products: [],\n      totalPage: '',\n      loading: true\n    });\n\n    return _this;\n  }\n\n  _createClass(FrameComponent, [{\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      var _this2 = this;\n\n      console.log(this._link);\n      this.setState({\n        counter: 0\n      });\n      this.getData();\n      this.props.router.events.on('routeChangeComplete', function (url) {\n        // this.getData()\n        console.log(url);\n\n        _this2.setState({\n          loading: true\n        });\n\n        _this2.paginate(url);\n      });\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      var _this3 = this;\n\n      var PrevPage = function PrevPage(e) {\n        // this.setState({ counter:  +this.props.router.query.page + 1 })\n        if (_this3.state.counter > 0) {\n          _this3.setState({\n            counter: _this3.state.counter - 1\n          });\n        } else {\n          _this3.setState({\n            counter: 0\n          });\n        }\n\n        page();\n      };\n\n      var page = function page() {\n        var _this3$props$router$q, term, page, link, res, data;\n\n        return _regeneratorRuntime.async(function page$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                _this3$props$router$q = _this3.props.router.query, term = _this3$props$router$q.term, page = _this3$props$router$q.page;\n                link = \"https://konga-jumia.herokuapp.com/\".concat(_this3.props.type, \"?term=\").concat(term, \"&page=\").concat(_this3.state.counter);\n\n                _this3.setState({\n                  products: [],\n                  loading: true\n                });\n\n                _context3.next = 5;\n                return _regeneratorRuntime.awrap(fetch(link));\n\n              case 5:\n                res = _context3.sent;\n                console.log(link);\n                _context3.next = 9;\n                return _regeneratorRuntime.awrap(res.json());\n\n              case 9:\n                data = _context3.sent;\n                console.log(data);\n\n                _this3.setState({\n                  products: data.items,\n                  totalPage: data.page,\n                  loading: false\n                });\n\n              case 12:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        });\n      };\n\n      var Nextpage = function Nextpage(e) {\n        _this3.setState({\n          counter: _this3.state.counter + 1\n        });\n\n        page();\n      };\n\n      var listItems = this.state.products.filter(function (product) {\n        return product.image !== null;\n      }).map(function (product, i) {\n        return __jsx(\"div\", {\n          className: \"lg:w-1/2 bg-green-600 lg:p-3 p-2 text-white w-full\",\n          key: i\n        }, __jsx(\"div\", {\n          className: \"bg-white text-black rounded-lg flex items-center\",\n          style: {\n            height: '300px'\n          }\n        }, __jsx(\"div\", {\n          className: \"w-full\"\n        }, __jsx(\"p\", {\n          className: \"m-2 lg:m-3 text-xs lg:text-sm\"\n        }, product.name.slice(0, 50) + '...'), __jsx(\"img\", {\n          src: product.image,\n          className: \"m-auto rounded-lg object-contain\",\n          style: {\n            height: '170px'\n          }\n        }), __jsx(\"div\", {\n          className: \"flex justify-between lg:m-3 m-2 text-xs lg:text-sm\"\n        }, __jsx(\"p\", null, product.price), __jsx(\"a\", {\n          href: product.link,\n          target: \"_blank\"\n        }, \" View \")))));\n      });\n      return __jsx(React.Fragment, null, this.state.loading ? __jsx(\"div\", {\n        className: \"jsx-699946157\" + \" \" + \"flex justify-center item-center mt-20\"\n      }, __jsx(\"div\", {\n        id: \"button\",\n        className: \"jsx-699946157\"\n      })) : '', __jsx(\"section\", {\n        className: \"jsx-699946157\" + \" \" + \"flex flex-wrap max-h-screen overflow-y-auto bg-white m-1 lg:m-3\"\n      }, listItems), __jsx(\"section\", {\n        style: {\n          bottom: '30px'\n        },\n        className: \"jsx-699946157\" + \" \" + \"pagination class flex flex-wrap justify-center items-center pb-5 fixed l-0 r-0 m-auto w-1/2\"\n      }, __jsx(\"button\", {\n        onClick: Nextpage,\n        className: \"jsx-699946157\" + \" \" + \"lg:p-2 p-1 text-xs lg:text-sm bg-green-500 text-white rounded-lg mr-3\"\n      }, 'Next >'), __jsx(\"span\", {\n        className: \"jsx-699946157\" + \" \" + \"text-xs lg:text-sm\"\n      }, this.state.counter, \" of \", this.state.totalPage, \" \"), __jsx(\"button\", {\n        onClick: PrevPage,\n        className: \"jsx-699946157\" + \" \" + \"lg:p-2  p-1 bg-white text-green-800 text-xs lg:text-sm rounded-lg ml-3\"\n      }, '< Prev')), __jsx(_JSXStyle, {\n        id: \"699946157\"\n      }, [\"#button.jsx-699946157{height:40px;width:40px;background:transparent;border-radius:50%;border:1px solid white;border-top:2px solid green;-webkit-animation:spinner1-jsx-699946157 600ms linear infinite;animation:spinner1-jsx-699946157 600ms linear infinite;}\", \"@-webkit-keyframes spinner1-jsx-699946157{to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}\", \"@keyframes spinner1-jsx-699946157{to{-webkit-transform:rotate(360deg);-ms-transform:rotate(360deg);transform:rotate(360deg);}}\"]));\n    }\n  }]);\n\n  return FrameComponent;\n}(Component);\n\nexport default withRouter(FrameComponent);","map":null,"metadata":{},"sourceType":"module"}